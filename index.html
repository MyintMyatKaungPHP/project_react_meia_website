<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MIEA School</title>
    <link id="favicon" rel="icon" href="./src/assets/images/MIEA_logo.png" />

    <!-- Google Fonts - Roboto Slab -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="./src/assets/styles/style.css" />

    <script>
      (function () {
        try {
          var apiBase =
            "%VITE_API_URL%" || "http://project_laravel_miea_portal.test/api";
          if (
            !apiBase ||
            apiBase === "" ||
            apiBase.includes("%VITE_API_URL%")
          ) {
            apiBase = "http://project_laravel_miea_portal.test/api";
          }
          var assetBase = apiBase.replace(/\/api\/?$/, "");
          fetch(apiBase + "/site-settings/basic-info")
            .then(function (r) {
              return r.ok ? r.json() : null;
            })
            .then(function (json) {
              if (!json || !json.data) return;
              var d = json.data;
              if (d.site_name) {
                document.title = d.site_name;
              }
              if (d.site_favicon) {
                var href = String(d.site_favicon || "");
                if (!/^https?:\/\//i.test(href)) {
                  href = assetBase + href;
                }
                var link =
                  document.querySelector("link#favicon") ||
                  document.createElement("link");
                link.id = "favicon";
                link.rel = "icon";
                link.href = href;
                if (!link.parentNode) document.head.appendChild(link);
              }
            })
            .catch(function () {
              /* ignore */
            });
        } catch (e) {
          /* ignore */
        }
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
